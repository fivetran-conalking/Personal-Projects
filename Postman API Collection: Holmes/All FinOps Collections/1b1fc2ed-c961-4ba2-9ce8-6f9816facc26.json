{"info":{"_postman_id":"1b1fc2ed-c961-4ba2-9ce8-6f9816facc26","name":"Xero API 2.0","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"Get started","event":[{"listen":"test","script":{"type":"text/javascript","exec":["var data = JSON.parse(responseBody);","postman.setEnvironmentVariable(\"xero-tenant-id\", data[0].TenantId);","","tests[\"xero-tenant-id: \" + pm.environment.get(\"xero-tenant-id\")] = true;"]}}],"id":"449e5823-9e62-45da-b691-2fed2fd5dc6e","request":{"auth":{"type":"oauth2","oauth2":[{"key":"accessToken","value":"","type":"string"},{"key":"addTokenTo","value":"header","type":"string"},{"key":"tokenType","value":"Bearer","type":"string"}]},"method":"GET","header":[],"url":{"raw":"https://api.xero.com/connections","protocol":"https","host":["api","xero","com"],"path":["connections"]}},"response":[]},{"name":"Connections","event":[{"listen":"test","script":{"type":"text/javascript","exec":["var data = JSON.parse(responseBody);","postman.setEnvironmentVariable(\"xero-tenant-id\", data[0].TenantId);","","tests[\"xero-tenant-id: \" + pm.environment.get(\"xero-tenant-id\")] = true;"]}}],"id":"bd58982b-8555-45d9-98aa-365b25f40bc2","request":{"method":"GET","header":[{"key":"Authorization","type":"text","value":"Bearer {{access_token}}"}],"url":{"raw":"https://api.xero.com/connections","protocol":"https","host":["api","xero","com"],"path":["connections"]}},"response":[]},{"name":"Invoices","event":[{"listen":"prerequest","script":{"type":"text/javascript","exec":["    tokenUrl = 'https://identity.xero.com/connect/token'","    clientId = pm.variables.get('client_id'),","    clientSecret = pm.variables.get('client_secret'),","    refreshToken = pm.variables.get('refresh_token'),","    requestOptions = {","      method: 'POST',","      url: tokenUrl,","      body: {","        mode: 'formdata',","        formdata: [","            {","                key: 'grant_type',","                value: 'refresh_token'","            },","            {","                key: 'client_id',","                value: clientId","            },","            {","                key: 'client_secret',","                value: clientSecret","            },","            {","                key: 'refresh_token',","                value: refreshToken","            }","        ]","      }","    };","","console.log({ requestOptions });","","pm.sendRequest(requestOptions, (err, response) => {","  let jsonResponse = response.json(),","      newAccessToken = jsonResponse.access_token;","      newRefreshToken = jsonResponse.refresh_token;","      ","  console.log({ err, jsonResponse, newAccessToken, newRefreshToken })","  ","  pm.environment.set('access_token', newAccessToken);","  pm.environment.set('refresh_token', newRefreshToken);","  ","});"]}}],"id":"039366c1-b574-4242-ba9a-f99d892ef233","request":{"method":"GET","header":[{"key":"xero-tenant-id","value":"{{xero-tenant-id}}","type":"text"},{"key":"Authorization","value":"Bearer {{access_token}}","type":"text"},{"key":"Accept","value":"application/json","type":"text"},{"key":"Content-Type","value":"application/json","type":"text"}],"url":{"raw":"https://api.xero.com/api.xro/2.0/Invoices","protocol":"https","host":["api","xero","com"],"path":["api.xro","2.0","Invoices"]},"description":"\t"},"response":[]}]}